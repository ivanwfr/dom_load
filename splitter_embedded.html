<!DOCTYPE html>
<html>
<head>
  <title>splitter_embedded</title>
  <!-- META {{{ -->
  <meta id="meta_http_equiv"    http-equiv="content-type"  content="text/html" charset="utf-8">
  <meta                         http-equiv="Cache-control" content="no-cache">
  <meta                         http-equiv="pragma"        content="no-cache">
  <!-- }}} -->
  <!-- CSS [link] {{{-->
  <link id="dom_host_css"   type="text/css" href="stylesheet/dom_host.css" rel="stylesheet"/>

  <!--}}}-->
<!-- CSS [inline] {{{-->
 <style>
    body    { margin      :  5px;            }
    body    { background  : #111;            }
    body    { color       : #EED;            }
    body    { font-family : "Comic sans ms"; }

    h1      { margin      :   5px; }
    h1      { clear       : right; }
    h1      { user-select :  none; }

    button  { margin      :  5px; }
    button  { background  : #333; }
    button  { color       : #EED; }

    summary { user-select : none; }

    p                   { margin-left      : 2em;                                       }
    p                   { margin-left      : 2em;                                       }
    p                   { max-width        : 64ch;                                      }
    p                   { border           : 4px inset #FFFA;                           }
    p                   { border-radius    : 0.8em; padding:0.5em;                      }
    p:nth-of-type( odd) { background-color :           #AFA8;                           }
    p:nth-of-type(even) { background-color :           #FAA8;                           }
    p:nth-of-type(   1) { border           : 4px outset #FF0A; background-color: #DDDA; }

    .todo               { color: red; font-family: "Comic sans ms"; font-weight: bolder; }
/* note {{{*/
.note {
 display           : inline-block;
 background-color  : #4444;
 border-color      : #FF0A;
 color             : #FF4A;
 border-left-width : 5px;
 border-left-style : solid;
 font-family       : "Comic sans ms";
 font-weight       : 700;
 font-size         : 50%;
 padding           : 1ex 1em 1ex 1em;
 margin            : 0 2em;
 white-space       : pre;
}
.note.green { border-color : green; background-color: rgba(230,180,180,0.8) !important;}
.note.red   { border-color :   red; background-color: rgba(180,230,180,0.8) !important;}

.note em { padding:0 1em 0 1em; }
.note pre { margin:0; }
.pat_div { display:none; }
/*}}}*/
</style>
<!--}}}-->
  <!-- SCRIPT [src] .. log scroll sentence details wot {{{-->

  <script id="dom_log_js"            src="script/stub/dom_log.js"                 ></script>

  <script id="dom_sentence_util_js"  src="script/stub/dom_sentence_util.js"       ></script>
  <script id="dom_sentence_event_js" src="script/stub/dom_sentence_event.js"      ></script>
  <script id="dom_scroll_js"         src="script/stub/dom_scroll.js"              ></script>
  <script id="dom_sentence_js"       src="script/dom_sentence.js"                 ></script>

  <script id="dom_details_log_js"    src="script/stub/dom_details_log.js"         ></script>
  <script id="dom_details_util_js"   src="script/stub/dom_details_util.js"        ></script>
  <script id="dom_details_js"        src="script/dom_details.js"                  ></script>

  <script id="dom_wot_log_js"        src="script/dom_wot_log.js"                  ></script>
  <script id="dom_wot_util_js"       src="script/dom_wot_util.js"                 ></script>
  <script id="dom_wot_js"            src="script/dom_wot.js"                      ></script>
  <script id="dom_popup_js"          src="script/dom_popup.js"                    ></script>

 <!--}}}-->
<!-- SCRIPT [inline] {{{ -->
<script>
DOM_LOAD_ID  = "splitter_embedded_html";    DOM_LOAD_TAG  = DOM_LOAD_ID+" (220220:19h:09)";
let log_this = true;
/* set_title {{{*/
function set_title(e)
{
 console.log("...set_title("+e.type+")");
 document.getElementsByTagName("html" )[0].id        = DOM_LOAD_ID;
 document.getElementsByTagName("title")[0].innerText = DOM_LOAD_ID.toLowerCase();
 document.getElementsByTagName("h1"   )[0].innerHTML
  = "<b onclick='location.reload();' title='Reload'                                    > &#x21BB;</b> "
  + "<b onclick='console.clear();'   title='clear console&#0010;...same with alt-click'> &#x2699;</b> "
  + "<em class='cc4'>"+DOM_LOAD_TAG+"</em>"
  ;
}
/*}}}*/
/* script_INIT {{{*/
function script_INIT(e)
{
if( log_this) console.log("script_INIT( "+e.type+" )");

    set_title(e);

    dom_modules_IMPORT();

    if(typeof dom_sentence_event != "undefined") dom_sentence_event.set_mouseUP_display_state(true);
}
/*}}}*/
/*  dom_modules_IMPORT {{{*/
let dom_modules_IMPORT = function()
{
if(log_this) console.log("dom_modules_IMPORT");

if(typeof dom_details        != "undefined") dom_details       .t_details_IMPORT       (log_this, 1); /* script/dom_details.js     */
if(typeof dom_wot            != "undefined") dom_wot           .t_wot_IMPORT           (log_this, 2); /* script/dom_wot.js         */
//(typeof dom_scroll         != "undefined") dom_scroll        .t_scroll_IMPORT        (log_this, 3); /* script/stub/dom_scroll.js */
if(typeof dom_sentence       != "undefined") dom_sentence      .t_sentence_IMPORT      (log_this, 4); /* script/dom_sentence.js    */

if(typeof dom_sentence_event != "undefined") dom_sentence_event.t_SENTENCE_add_LISTENER(log_this);

};
/*}}}*/
</script>
<!--}}}-->
<!-- check_load_html_results {{{ -->
 <script>
  const lbH  = "font-weight:900; line-height:1.5em; border:1px solid gray; margin:   0 1ex 1ex   0; padding:0 .5em 0 .5em; border-radius:1em 1em 1em 1em; background:linear-gradient(to bottom, #555 0%, #223 80%, #454 100%);";
  const lf2  = "color:#FF0000;";
  const lf5  = "color:#9ACD32;";
  const lf8  = "color:#A0A0A0;";
  const dom_data_SYMBOL_CHECK_MARK  = "\u2714";
  const dom_data_SYMBOL_NOT_CHECKED = "\u237B";
  function check_load_html_results(e)
  {
   console.log("%c check_load_html_results( "+e.type+" ): "+DOM_LOAD_TAG, lbH+lf5);
   let id;                                   let missing_ids  = "";

   if(typeof DOM_LOG_JS_TAG            === 'undefined') missing_ids += "\n DOM_LOG_JS_TAG";
   if(typeof DOM_SCROLL_JS_TAG         === 'undefined') missing_ids += "\n DOM_SCROLL_JS_TAG";

   if(typeof DOM_SENTENCE_UTIL_JS_TAG  === 'undefined') missing_ids += "\n DOM_SENTENCE_UTIL_JS_TAG";
   if(typeof DOM_SENTENCE_EVENT_JS_TAG === 'undefined') missing_ids += "\n DOM_SENTENCE_EVENT_JS_TAG";
   if(typeof DOM_SENTENCE_JS_TAG       === 'undefined') missing_ids += "\n DOM_SENTENCE_JS_TAG";

   if(typeof DOM_DETAILS_LOG_JS_TAG    === 'undefined') missing_ids += "\n DOM_DETAILS_LOG_JS_TAG";
   if(typeof DOM_DETAILS_UTIL_JS_TAG   === 'undefined') missing_ids += "\n DOM_DETAILS_UTIL_JS_TAG";
   if(typeof DOM_DETAILS_JS_TAG        === 'undefined') missing_ids += "\n DOM_DETAILS_JS_TAG";

   if(typeof DOM_WOT_LOG_JS_TAG        === 'undefined') missing_ids += "\n DOM_WOT_LOG_JS_TAG";
   if(typeof DOM_WOT_UTIL_JS_TAG       === 'undefined') missing_ids += "\n DOM_WOT_UTIL_JS_TAG";
   if(typeof DOM_WOT_JS_TAG            === 'undefined') missing_ids += "\n DOM_WOT_JS_TAG";

   if(missing_ids) {
    let lbb = "font-size:150%; font-weight:900; margin:0 0 0 0;";
    let lf2 = "color:#FF0000;";
    console.log("%c"+dom_data_SYMBOL_NOT_CHECKED+"%c"+missing_ids+"%c is missing", lbH+lf2, lf2, lf8);
    alert(         "MISSING IDs:\n"+missing_ids);
   }
  }

  function check_missing_id(id)
  {
   let      shadow_root = tools.t_get_shadow_root();
   let el = shadow_root
       ?    shadow_root.querySelector("#"+id)
       :    document   .querySelector("#"+id);
   if(!el ) return "\n#"+id;
   console.log("%c"+dom_data_SYMBOL_CHECK_MARK+"%c"+el.textContent,lbH+lf8,lf8);
   return "";
  }

//setTimeout(check_load_html_results, 500);
document.addEventListener("DOMContentLoaded", check_load_html_results);
window  .addEventListener("load"            , script_INIT  );
 </script>
<!--}}}-->
</head>
<body>
 <h1>...</h1>

<!-- BUTTONS [WOT] .. split {{{-->
<hr>
 <button onclick='dom_wot.t_WOT_SPLIT(); this.innerHTML = "✔ "+this.innerHTML;'>dom_wot.t_WOT_SPLIT </button>
<!--{{{-->
<details class="note" id="t_WOT_SPLIT" open><summary>note</summary>
… SPLIT UP WALL OF TEXT NODES .. (innerHTML ➔ innerText)
… REPLACE BIG CHUNCKS OF TEXT WITH A BUNCH OF SMALLER PARAGRAPHS
… SPLIT INTO LINES
 <em class="todo">TODO: scroll into view only if not already visible</em>
</details> <!--}}}-->
 <br>
<!--}}}-->
<!-- BUTTONS [DETAILS] .. onload {{{-->
 <button title="details_onload"         class="em2 action" onclick='dom_details.details_onload      (     ); this.innerHTML = "✔ "+this.innerHTML;'    >dom_details.onload</button>
<!--{{{-->
<details class="note" id="details_onload"><summary>note</summary>
… RESTORE ONLOAD [open] STATE                .. f(localStorage)
… LISTEN TO DETAILS EVENT                    .. (mousedown toggle)
… DETAILS RADIO-BEHAVIOR                     .. f(localStorage)
… OPEN LINKS HASH TARGETS DETAILS-CONTAINERS .. (details_add_hash_link_onclick_listener);
</details> <!--}}}-->
 <br>
<!--}}}-->
<!-- BUTTONS [DETAILS] .. close open radio {{{-->
 <button title="details_close"          class="em3 action" onclick='dom_details.details_close_opened(     );'                                            ><label> ▲        details_close_opened          </label></button>
 <button title="details_open"           class="em4 action" onclick='dom_details.details_open_closed (     );'                                            ><label> ▼        details_open_closed           </label></button>
 <button title="details radio behavior" class="em5 action" onclick='dom_details.details_radio_toggle(event);'><input id="details_radio" type="checkbox" /><label> &#x21F6; details_radio_toggle &#x25B6; </label></button>
<!--}}}-->

 <!-- PAGE CONTENT -->
 <hr>
<!-- dom_sentence_js {{{-->
<details id="dom_sentence_js" open class="folded_code"><summary> <B>dom_sentence</B> </summary>
<pre> <!--{{{-->
/*
./script/dom_sentence.js
*/
let dom_sentence_js_data ="data:text/javascript;charset='utf-8',"+ escape(`
`
</pre> <!--}}}-->
</details>
<!--}}}-->
<!-- dom_sentence_event_js {{{-->
<details id="dom_sentence_event_js" open class="folded_code"><summary> <B>dom_sentence_event</B> </summary>
<pre> <!--{{{-->
/*
./script/stub/dom_sentence_event.js
*/
let dom_sentence_event_js_data ="data:text/javascript;charset='utf-8',"+ escape(`
`
</pre> <!--}}}-->
</details>
<!--}}}-->
<!-- dom_sentence_util_js {{{-->
<details id="dom_sentence_util_js" open class="folded_code"><summary> <B>dom_sentence_util</B> </summary>
<pre> <!--{{{-->
/*
./script/stub/dom_sentence_util.js
*/
let dom_sentence_util_js_data ="data:text/javascript;charset='utf-8',"+ escape(`
`
</pre> <!--}}}-->
</details>
<!--}}}-->
<!-- dom_scroll_js {{{-->
<details id="dom_scroll_js" open class="folded_code"><summary> <B>dom_scroll</B> </summary>
<pre> <!--{{{-->
/*
./script/stub/dom_scroll.js
*/
let dom_scroll_js_data ="data:text/javascript;charset='utf-8',"+ escape(`
`
</pre> <!--}}}-->
</details>
<!--}}}-->
<!-- dom_log_js {{{-->
<details id="dom_log_js" open class="folded_code"><summary> <B>dom_log</B> </summary>
<pre> <!--{{{-->
/*
./script/stub/dom_log.js
*/
let dom_log_js_data ="data:text/javascript;charset='utf-8',"+ escape(`
`
</pre> <!--}}}-->
</details>
<!--}}}-->

 <hr>
<details id="string_replace" style="background-color: #EEA; color:#111; padding:1em; border-radius:1em; border: 0.5em solid #EFE;">
<!-- String replace {{{-->
<summary><b>String.prototype.replace()</b></summary>
<!-- PRE {{{-->
<p>
The <em>replace()</em> method returns a new string with some or all matches of a pattern
replaced by a replacement.
The pattern can be a string or a RegExp, and the replacement can be a string or a function to be called for each match.
If pattern is a string, only the first occurrence will be replaced.

The original string is left unchanged
</p>
<!--}}}-->
<h2>Parameters</h2>
<!-- P {{{-->
<h3>regexp (pattern)</h3>
<p>
A RegExp object or literal. The match or matches are replaced with newSubstr or the value returned by the specified replacerFunction.
</p>

<h3>substr</h3>
<p>
A String that is to be replaced by newSubstr. It is treated as a literal string and is not interpreted as a regular expression. Only the first occurrence will be replaced.
</p>

<h3>newSubstr (replacement)</h3>
<p>
The String that replaces the substring specified by the specified regexp or substr parameter. A number of special replacement patterns are supported; see the "Specifying a string as a parameter" section below.

If newSubstr is an empty string, then the substring given by substr, or the matches for regexp, are removed (rather then being replaced).
</p>

<h3>replacerFunction (replacement)</h3>
<p>
A function to be invoked to create the new substring to be used to replace the matches to the given regexp or substr. The arguments supplied to this function are described in the "Specifying a function as a parameter" section below.
</p>
<!--}}}-->
<!--}}}-->
</details>

 <hr>
</body>
</html>
<!--{{{
"┌─────────────────────────────────────────────────────────────────────────────┐
"│                                                                             │
:e  $BROWSEEXT/SplitterExtension/manifest.json

:e  $BROWSEEXT/SplitterExtension/javascript/background.js
:e  $BROWSEEXT/SplitterExtension/javascript/content.js
"...           $RPROFILES/script/dom_sentence.js
:e             $RPROFILES/script/stub/dom_sentence_event.js
:e             $RPROFILES/script/stub/dom_scroll.js
:e             $RPROFILES/script/stub/dom_sentence_util.js
:e             $RPROFILES/script/stub/dom_log.js
:e             $RPROFILES/stylesheet/dom_host.css

:e             $RPROFILES/script/dom_select.js
:e             $RPROFILES/script/dom_util.js
:e             $RPROFILES/script/dom_log.js

:e             $RPROFILES/script/splitter.js
:e             $RPROFILES/script/dom_load.js
"│                                                                             │
"└─────────────────────────────────────────────────────────────────────────────┘
}}}-->
<!--
:!start /b explorer %
:so $APROJECTS/VIM/rtabs_D_J.vim

:n % $RPROFILES/splitter*.html $RPROFILES/script/splitter.js

:n % script/stub/dom_sentence_event.js script/stub/dom_scroll.js
:n % script/dom_details.js             script/stub/dom_details_util.js       script/stub/dom_details_log.js
:n % script/dom_sentence.js            script/stub/dom_sentence_util.js      script/stub/dom_log.js
:n % script/dom_wot.js                 script/dom_wot_util.js                script/dom_wot_log.js
-->

